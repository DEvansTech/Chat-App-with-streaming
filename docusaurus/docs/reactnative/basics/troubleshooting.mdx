---
id: troubleshooting
sidebar_position: 6
title: Troubleshooting
---

There are a few common problems users have reported when setting up Stream Chat React Native, to help you if you run afoul of these problems we have created a list of common issues and solutions.

## Cannot run remote debugger

React Native is [undergoing major architecture changes](https://github.com/react-native-community/discussions-and-proposals/issues/91), [Reanimated 2](https://docs.swmansion.com/react-native-reanimated/) has capitalized on the already released improvements and taken advantage of the JSI to provide an amazingly powerful library.
Currently though [there are a list of limitations](https://docs.swmansion.com/react-native-reanimated/docs/#known-problems-and-limitations) that Reanimated 2 has, one of which is that the use of the JSI prevents debugging without using [Flipper](https://fbflipper.com/), therefore you must use Flipper for remote debugging.

## Image picker not working

If the image picker is appearing incorrectly, for instance behind a bottom Tab Bar, it is likely the `OverlayProvider` is not setup in the correct location within the application.
Please refer to the [Stream Chat with Navigation](./stream_chat_with_navigation.mdx) documentation to properly place the `OverlayProvider` in relation to your navigation solution.

### iOS

Add the `NSPhotoLibraryUsageDescription` key in your `Info.plist` with a description of use.<br/>
Add the `NSPhotoLibraryAddUsageDescription` key in your `Info.plist` with a description of use.

### Android

The standard storage permissions are required for the image picker to work on Android, and must be included in the `AndroidManifest.xml` file.

```xml
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
```

In addition, and often overlooked, within the `application` tag you must included the `requestLegacyExternalStorage` attribute.

```xml
<application
  android:requestLegacyExternalStorage="true"
  ...
/>
```

Without this some Android devices will fail to load images despite permissions being granted within the settings.

## Image picker incorrect height

The image picker opens the gallery to a height based on the location of the `MessageInput`, if there is space below the `MessageInput`, for instance a Safe Area or a Tab Bar, this must be taken into account.
To account for this the prop `bottomInset` can be provided to the `OverlayProvider`.

```tsx
<OverlayProvider bottomInset={/** number */}>
```

Similarly if the gallery fully open is not at the desired height, this can be adjusted using the `OverlayProvider` prop `topInset`.

```tsx
<OverlayProvider topInset={/** number */}>
```

:::note

Both of these values can be set via the appropriate functions, `setBottomInset` and `setTopInset`, that are accessible via the `useAttachmentPickerContext` hook.

:::

## Image viewer not full screen

If the image viewer or message overlay is not covering the full screen, for instance it is rendering below or behind a Header, it is likely the `OverlayProvider` is not setup in the correct location within the application.
Please refer to the [Stream Chat with Navigation](./stream_chat_with_navigation.mdx) documentation to properly place the `OverlayProvider` in relation to your navigation solution or other components.

## Camera not working

### iOS

Add the `NSCameraUsageDescription` key in your `Info.plist` with a description of use.<br/>
Add the `NSPhotoLibraryUsageDescription` key in your `Info.plist` with a description of use.<br/>
Add the `NSMicrophoneUsageDescription` key in your `Info.plist` with a description of use.<br/>

### Android

The standard camera permissions are required for the camera to work on Android, and must be included in the `AndroidManifest.xml` file.

```xml
<uses-permission android:name="android.permission.CAMERA"/>
```

Add `maven { url 'https://maven.google.com' }` to `android/build.gradle` 

```java {15}
allprojects {
  repositories {
    mavenLocal()
    maven {
      // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm
      url("$rootDir/../node_modules/react-native/android")
    }
    maven {
      // Android JSC is installed from npm
      url("$rootDir/../node_modules/jsc-android/dist")
    }

    google()
    jcenter()
    maven { url 'https://maven.google.com' }
    maven { url 'https://www.jitpack.io' }
  }
}
```

Ensure `buildToolsVersion`, `compileSdkVersion`, and `targetSdkVersion` are all >= 26 in `android/build.gradle`

```java
buildscript {
  ext {
    buildToolsVersion = "29.0.3"
    compileSdkVersion = 29
    targetSdkVersion = 29
    ...
  }
  ...
}
```


Add `vectorDrawables.useSupportLibrary = true` to `android/app/build.gradle`


```java
android {
    defaultConfig {
        vectorDrawables.useSupportLibrary = true
        ...
    }
    ...
}
```

## Reanimated 2

We rely on Reanimated 2 heavily for gesture based interactions and animations. It is vital you follow the [Reanimated 2 installation instructions](https://docs.swmansion.com/react-native-reanimated/docs/installation/) for the library to work properly.

### Failed to create a worklet

If you are encountering errors related to `Reanimated 2 failed to create a worklet` you must likely forgot to add the `react-native-reanimated/plugin` to your `babel.config.js` file.

### Blank screen on Android

If you are encountering errors on Android and the screen is blank it is likely you forgot to finish the [Reanimated 2 Android setup](https://docs.swmansion.com/react-native-reanimated/docs/installation/#android).

Ensure Hermes is enabled in `android/app/build.gradle`

```java
project.ext.react = [
  enableHermes: true  // clean and rebuild if changing
]
```

Add Reanimated in `MainApplication.java`

```java {1-2,13-16}
import com.facebook.react.bridge.JSIModulePackage;
import com.swmansion.reanimated.ReanimatedJSIModulePackage;
...

private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {
  ...

  @Override
  protected String getJSMainModuleName() {
    return "index";
  }

  @Override
  protected JSIModulePackage getJSIModulePackage() {
    return new ReanimatedJSIModulePackage();
  }
};
...
```

## Touchables not working

If you are having trouble with pressing, swiping, or otherwise interacting with components it is likely the result of [React Native Gesture Handler](https://docs.swmansion.com/react-native-gesture-handler/docs/) not being properly setup.
Be sure to follow all needed [additional steps](https://docs.swmansion.com/react-native-gesture-handler/docs/) to complete the installation.

This includes ensuring you import `react-native-gesture-handler` at the top of your app entry file.

```tsx
import 'react-native-gesture-handler';
```

And for Android you additionally need to update `MainActivity.java` to override the method for creating the `ReactRootView`.

```java {4-6,13-21}
package com.swmansion.gesturehandler.react.example;

import com.facebook.react.ReactActivity;
import com.facebook.react.ReactActivityDelegate;
import com.facebook.react.ReactRootView;
import com.swmansion.gesturehandler.react.RNGestureHandlerEnabledRootView;
public class MainActivity extends ReactActivity {

  @Override
  protected String getMainComponentName() {
    return "Example";
  }
  @Override
  protected ReactActivityDelegate createReactActivityDelegate() {
    return new ReactActivityDelegate(this, getMainComponentName()) {
      @Override
      protected ReactRootView createRootView() {
        return new RNGestureHandlerEnabledRootView(MainActivity.this);
      }
    };
  }
}
```